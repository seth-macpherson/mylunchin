
<div data-hook="checkout_payment_step">
  <% unless @errors_exist %>
    <div class="box">
      Please provide your credit card information and click 'Save and Continue'.
      <% if Rails.env == "development" %>
      <br />
      TEST_VISA = 4111111111111111
      <br />
      CVS = TEST_VISA
      <% end %>
    </div>
  <% end %>

  <% if @order.available_payment_methods.count > 1 %>
    <%= hidden_field_tag "order[payments_attributes][][payment_method_id]", @order.available_payment_methods.first.id %>
  <% else %>
    <% @order.available_payment_methods.each do |method| %>
    <div class="box">
      <label>
        <%= radio_button_tag "order[payments_attributes][][payment_method_id]", method.id, method == @order.payment_method %>
        <%= t(method.name, :scope => :payment_methods, :default => method.name) %>
      </label>
    </div>
    <% end %>
  <% end %>
  
  
  <ul id="payment-methods" data-hook>
    <% @order.available_payment_methods.each do |method| %>
      <li id="payment_method_<%= method.id %>" class="<%= 'last' if method == @order.available_payment_methods.last %>" data-hook>
          <%= render "checkout/payment/#{method.method_type}", :payment_method => method %>
      </li>
    <% end %>
  </ul>
  <div class="divider line"></div>
  <div id="cart-buttons" data-hook="buttons">
    <button type="submit" name="save_and_" class="button classy primary">
      <span>Save and Continue</span>
    </button>
    <script>disableSaveOnClick();</script>
  </div>

  <div data-hook="coupon_code_field" data-hook></div>
</div>
<div class="clearfix"></div>
